<!DOCTYPE html>
<html lang="no">
<head>
먝먝 <meta charset="UTF-8">
먝먝 <meta name="viewport" content="width=device-width, initial-scale=1.0">
먝먝 <title>B친tspill med Kollisjoner</title>
먝먝 <style>
먝먝먝먝먝먝 body { margin: 0; overflow: hidden; background-color: #333; font-family: Arial, sans-serif; }
먝먝먝먝먝먝 canvas { display: block; background-color: #006994; }
먝먝먝먝먝먝 #ui { position: absolute; top: 20px; left: 20px; color: white; font-size: 14px; background: rgba(0, 0, 0, 0.5); padding: 10px; border-radius: 5px; pointer-events: none; }
먝먝먝먝먝먝 #speedometer { position: absolute; top: 20px; right: 20px; color: white; font-size: 24px; font-weight: bold; background: rgba(0, 0, 0, 0.5); padding: 12px 18px; border-radius: 5px; pointer-events: none; border: 2px solid white;}
먝먝먝먝먝먝 .crash-msg { color: #ff4444; display: none; }
먝먝 </style>
</head>
<body>

<div id="ui">
먝먝 <strong>Kontroller:</strong><br>
먝먝 拘勇 Pil opp: Gi gass<br>
먝먝 拘勇 Pil ned: Brems / Rygg<br>
먝먝 拘勇 俱뫮잺 Piler: Sving<br>
먝먝 <br>
먝먝 <span id="crashText" class="crash-msg">KRASJ! 游눤</span>
</div>

<div id="speedometer">0 km/t</div>
<canvas id="gameCanvas"></canvas>

<script>
먝먝 const canvas = document.getElementById('gameCanvas');
먝먝 const ctx = canvas.getContext('2d');
먝먝 const crashText = document.getElementById('crashText');

먝먝 function resizeCanvas() {
먝먝먝먝먝먝 canvas.width = window.innerWidth;
먝먝먝먝먝먝 canvas.height = window.innerHeight;
먝먝 }
먝먝 window.addEventListener('resize', resizeCanvas);
먝먝 resizeCanvas();

먝먝 // Tastaturh친ndtering
먝먝 const keys = { ArrowUp: false, ArrowDown: false, ArrowLeft: false, ArrowRight: false };

먝먝 window.addEventListener('keydown', (e) => {
먝먝먝먝먝먝 if (keys.hasOwnProperty(e.code)) {
먝먝먝먝먝먝먝먝먝먝 e.preventDefault();
먝먝먝먝먝먝먝먝먝먝 keys[e.code] = true;
먝먝먝먝먝먝 }
먝먝 });

먝먝 window.addEventListener('keyup', (e) => {
먝먝먝먝먝먝 if (keys.hasOwnProperty(e.code)) {
먝먝먝먝먝먝먝먝먝먝 e.preventDefault();
먝먝먝먝먝먝먝먝먝먝 keys[e.code] = false;
먝먝먝먝먝먝 }
먝먝 });

먝먝 // 칒yer (Hindringer)
먝먝 const islands = [
먝먝먝먝먝먝 { x: 200, y: 200, radius: 50, color: '#2e8b57' },
먝먝먝먝먝먝 { x: 800, y: 500, radius: 80, color: '#228b22' },
먝먝먝먝먝먝 { x: 500, y: 300, radius: 35, color: '#3cb371' },
먝먝먝먝먝먝 { x: 1000, y: 200, radius: 60, color: '#2e8b57' },
먝먝먝먝먝먝 { x: 300, y: 600, radius: 45, color: '#228b22' }
먝먝 ];

먝먝 // B친t-objektet
먝먝 const boat = {
먝먝먝먝먝먝 x: canvas.width / 2,
먝먝먝먝먝먝 y: canvas.height / 2,
먝먝먝먝먝먝 angle: -Math.PI / 2,
먝먝먝먝먝먝 speed: 0,
먝먝먝먝먝먝 maxSpeed: 7,
먝먝먝먝먝먝 acceleration: 0.15,
먝먝먝먝먝먝 friction: 0.98,
먝먝먝먝먝먝 rotationSpeed: 0.07,
먝먝먝먝먝먝 radius: 15 // Brukes for kollisjon
먝먝 };

먝먝 const particles = [];
먝먝 const waterWaves = [];

먝먝 // Lag sm친 b칮lger i bakgrunnen
먝먝 for(let i=0; i<50; i++) {
먝먝먝먝먝먝 waterWaves.push({
먝먝먝먝먝먝먝먝먝먝 x: Math.random() * canvas.width,
먝먝먝먝먝먝먝먝먝먝 y: Math.random() * canvas.height,
먝먝먝먝먝먝먝먝먝먝 speed: Math.random() * 0.5 + 0.1
먝먝먝먝먝먝 });
먝먝 }

먝먝 function createParticle() {
먝먝먝먝먝먝 const offset = 25;
먝먝먝먝먝먝 // Lager to striper med partikler (venstre og h칮yre motor)
먝먝먝먝먝먝 particles.push({
먝먝먝먝먝먝먝먝먝먝 x: boat.x - Math.cos(boat.angle + 0.3) * offset,
먝먝먝먝먝먝먝먝먝먝 y: boat.y - Math.sin(boat.angle + 0.3) * offset,
먝먝먝먝먝먝먝먝먝먝 life: 1.0,
먝먝먝먝먝먝먝먝먝먝 size: Math.random() * 3 + 2
먝먝먝먝먝먝 });
먝먝먝먝먝먝 particles.push({
먝먝먝먝먝먝먝먝먝먝 x: boat.x - Math.cos(boat.angle - 0.3) * offset,
먝먝먝먝먝먝먝먝먝먝 y: boat.y - Math.sin(boat.angle - 0.3) * offset,
먝먝먝먝먝먝먝먝먝먝 life: 1.0,
먝먝먝먝먝먝먝먝먝먝 size: Math.random() * 3 + 2
먝먝먝먝먝먝 });
먝먝 }

먝먝 function updateSpeedometer() {
먝먝먝먝먝먝 const speedElement = document.getElementById("speedometer");
먝먝먝먝먝먝 const kmh = Math.abs((boat.speed / boat.maxSpeed) * 120); // Mer realistisk 120 knop/km/t
먝먝먝먝먝먝 speedElement.textContent = kmh.toFixed(0) + " km/t";
먝먝먝먝먝먝먝
먝먝먝먝먝먝 // Endre farge ved h칮y fart
먝먝먝먝먝먝 if (kmh > 100) speedElement.style.color = "#ffdd55";
먝먝먝먝먝먝 else speedElement.style.color = "white";
먝먝 }

먝먝 function checkCollisions() {
먝먝먝먝먝먝 let hit = false;
먝먝먝먝먝먝 islands.forEach(island => {
먝먝먝먝먝먝먝먝먝먝 // Beregn avstand mellom b친t og 칮y (Pytagoras)
먝먝먝먝먝먝먝먝먝먝 const dx = boat.x - island.x;
먝먝먝먝먝먝먝먝먝먝 const dy = boat.y - island.y;
먝먝먝먝먝먝먝먝먝먝 const distance = Math.sqrt(dx * dx + dy * dy);

먝먝먝먝먝먝먝먝먝먝 // Hvis avstand er mindre enn summen av radiene = Kollisjon
먝먝먝먝먝먝먝먝먝먝 if (distance < island.radius + boat.radius) {
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 hit = true;
먝먝먝먝먝먝먝먝먝먝먝먝먝먝먝
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 // Sprett tilbake (Reverser fart)
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 boat.speed = -boat.speed * 0.6;
먝먝먝먝먝먝먝먝먝먝먝먝먝먝먝
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 // Dytt b친ten litt ut av 칮ya s친 den ikke sitter fast
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 const angle = Math.atan2(dy, dx);
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 const pushOutDist = (island.radius + boat.radius) - distance + 2;
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 boat.x += Math.cos(angle) * pushOutDist;
먝먝먝먝먝먝먝먝먝먝먝먝먝먝 boat.y += Math.sin(angle) * pushOutDist;
먝먝먝먝먝먝먝먝먝먝 }
먝먝먝먝먝먝 });

먝먝먝먝먝먝 if (hit) {
먝먝먝먝먝먝먝먝먝먝 crashText.style.display = 'inline';
먝먝먝먝먝먝먝먝먝먝 setTimeout(() => crashText.style.display = 'none', 1000);
먝먝먝먝먝먝 }
먝먝 }

먝먝 function update() {
먝먝먝먝먝먝 // Styring
먝먝먝먝먝먝 if (Math.abs(boat.speed) > 0.1) {
먝먝먝먝먝먝먝먝먝먝 const direction = boat.speed > 0 ? 1 : -1;
먝먝먝먝먝먝먝먝먝먝 if (keys.ArrowLeft) boat.angle -= boat.rotationSpeed * direction;
먝먝먝먝먝먝먝먝먝먝 if (keys.ArrowRight) boat.angle += boat.rotationSpeed * direction;
먝먝먝먝먝먝 }

먝먝먝먝먝먝 // Gass og brems
먝먝먝먝먝먝 if (keys.ArrowUp) boat.speed += boat.acceleration;
먝먝먝먝먝먝 else if (keys.ArrowDown) boat.speed -= boat.acceleration;

먝먝먝먝먝먝 boat.speed *= boat.friction;

먝먝먝먝먝먝 // Oppdater posisjon
먝먝먝먝먝먝 boat.x += Math.cos(boat.angle) * boat.speed;
먝먝먝먝먝먝 boat.y += Math.sin(boat.angle) * boat.speed;

먝먝먝먝먝먝 // Skjerm-looping (Wrap around)
먝먝먝먝먝먝 if (boat.x > canvas.width) boat.x = 0;
먝먝먝먝먝먝 if (boat.x < 0) boat.x = canvas.width;
먝먝먝먝먝먝 if (boat.y > canvas.height) boat.y = 0;
먝먝먝먝먝먝 if (boat.y < 0) boat.y = canvas.height;

먝먝먝먝먝먝 // Kollisjonssjekk
먝먝먝먝먝먝 checkCollisions();

먝먝먝먝먝먝 // Partikler ved fart
먝먝먝먝먝먝 if (Math.abs(boat.speed) > 1) createParticle();

먝먝먝먝먝먝 // Oppdater partikler
먝먝먝먝먝먝 for (let i = particles.length - 1; i >= 0; i--) {
먝먝먝먝먝먝먝먝먝먝 particles[i].life -= 0.03;
먝먝먝먝먝먝먝먝먝먝 if (particles[i].life <= 0) particles.splice(i, 1);
먝먝먝먝먝먝 }

먝먝먝먝먝먝 // Oppdater bakgrunnsb칮lger
먝먝먝먝먝먝 waterWaves.forEach(wave => {
먝먝먝먝먝먝먝먝먝먝 wave.x += wave.speed;
먝먝먝먝먝먝먝먝먝먝 if (wave.x > canvas.width) wave.x = 0;
먝먝먝먝먝먝 });
먝먝 }

먝먝 function draw() {
먝먝먝먝먝먝 // Tegn vann
먝먝먝먝먝먝 ctx.fillStyle = '#006994';
먝먝먝먝먝먝 ctx.fillRect(0, 0, canvas.width, canvas.height);

먝먝먝먝먝먝 // Tegn sm친 b칮lger
먝먝먝먝먝먝 ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
먝먝먝먝먝먝 waterWaves.forEach(wave => {
먝먝먝먝먝먝먝먝먝먝 ctx.fillRect(wave.x, wave.y, 20, 2);
먝먝먝먝먝먝 });

먝먝먝먝먝먝 // Tegn 칮yer
먝먝먝먝먝먝 islands.forEach(island => {
먝먝먝먝먝먝먝먝먝먝 ctx.fillStyle = island.color;
먝먝먝먝먝먝먝먝먝먝 ctx.beginPath();
먝먝먝먝먝먝먝먝먝먝 ctx.arc(island.x, island.y, island.radius, 0, Math.PI * 2);
먝먝먝먝먝먝먝먝먝먝 ctx.fill();
먝먝먝먝먝먝먝먝먝먝 // Sandstrand-kant
먝먝먝먝먝먝먝먝먝먝 ctx.strokeStyle = '#e0cda7';
먝먝먝먝먝먝먝먝먝먝 ctx.lineWidth = 5;
먝먝먝먝먝먝먝먝먝먝 ctx.stroke();
먝먝먝먝먝먝 });

먝먝먝먝먝먝 // Tegn partikler (kj칮lvann)
먝먝먝먝먝먝 ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
먝먝먝먝먝먝 particles.forEach(p => {
먝먝먝먝먝먝먝먝먝먝 ctx.globalAlpha = p.life;
먝먝먝먝먝먝먝먝먝먝 ctx.beginPath();
먝먝먝먝먝먝먝먝먝먝 ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
먝먝먝먝먝먝먝먝먝먝 ctx.fill();
먝먝먝먝먝먝 });
먝먝먝먝먝먝 ctx.globalAlpha = 1.0;

먝먝먝먝먝먝 // Tegn B친ten
먝먝먝먝먝먝 ctx.save();
먝먝먝먝먝먝 ctx.translate(boat.x, boat.y);
먝먝먝먝먝먝 ctx.rotate(boat.angle);

먝먝먝먝먝먝 // B친tkropp
먝먝먝먝먝먝 ctx.fillStyle = '#ffffff';
먝먝먝먝먝먝 ctx.beginPath();
먝먝먝먝먝먝 ctx.moveTo(20, 0); // Spiss foran
먝먝먝먝먝먝 ctx.lineTo(-15, 12); // Bak venstre
먝먝먝먝먝먝 ctx.lineTo(-15, -12); // Bak h칮yre
먝먝먝먝먝먝 ctx.closePath();
먝먝먝먝먝먝 ctx.fill();

먝먝먝먝먝먝 // Detaljer p친 b친ten (stripe)
먝먝먝먝먝먝 ctx.fillStyle = '#ff0000';
먝먝먝먝먝먝 ctx.beginPath();
먝먝먝먝먝먝 ctx.moveTo(10, 0);
먝먝먝먝먝먝 ctx.lineTo(-15, 8);
먝먝먝먝먝먝 ctx.lineTo(-15, -8);
먝먝먝먝먝먝 ctx.closePath();
먝먝먝먝먝먝 ctx.fill();

먝먝먝먝먝먝 // Motor
먝먝먝먝먝먝 ctx.fillStyle = '#333';
먝먝먝먝먝먝 ctx.fillRect(-18, -6, 5, 12);

먝먝먝먝먝먝 // Frontrute
먝먝먝먝먝먝 ctx.fillStyle = '#87CEEB';
먝먝먝먝먝먝 ctx.beginPath();
먝먝먝먝먝먝 ctx.moveTo(5, 0);
먝먝먝먝먝먝 ctx.lineTo(-5, 6);
먝먝먝먝먝먝 ctx.lineTo(-5, -6);
먝먝먝먝먝먝 ctx.fill();

먝먝먝먝먝먝 ctx.restore();
먝먝 }

먝먝 function gameLoop() {
먝먝먝먝먝먝 update();
먝먝먝먝먝먝 updateSpeedometer();
먝먝먝먝먝먝 draw();
먝먝먝먝먝먝 requestAnimationFrame(gameLoop);
먝먝 }

먝먝 gameLoop();
</script>

</body>
</html>
